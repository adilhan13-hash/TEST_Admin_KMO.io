<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>ТЕСТ Админы — 20 вопросов</title>
<style>
body{font-family: Arial, sans-serif; padding:20px; max-width:900px; margin:auto;}
.question{margin-bottom:18px; padding:12px; border:1px solid #ddd; border-radius:8px;}
.options button{display:block; margin:6px 0; padding:10px; width:100%; text-align:left; cursor:pointer;}
.correct{background:#d4edda;}
.wrong{background:#f8d7da;}
#result{font-size:18px; margin-top:20px;}
.hidden{display:none;}
#nextBtn{margin-top:10px; padding:10px 15px; cursor:pointer;}
</style>
</head>
<body>
<h2>ТЕСТ Админы — 20 вопросов</h2>

<div id="quiz"></div>
<div id="controls">
  <button id="start">Начать тест</button>
  <button id="nextBtn" class="hidden">Следующий вопрос</button>
  <button id="restart" class="hidden">Пройти ещё раз</button>
</div>
<div id="result" class="hidden"></div>

<script>
// Вопросы (сокращённые для примера, добавьте остальные)
const allQuestions = [
  {"q":"Какой тип развертки используется в производственной цепочке КМО?","options":["interlaced (чересстрочная), (top field first) верхнее поле первое","interlaced (чересстрочная), (bottom field first) нижнее поле первое","progressive (прогрессивная)"],"correct":0},
  {"q":"Какая частота кадров используется в производственной цепочке КМО?","options":["23","25","60"],"correct":1},
  {"q":"Какой аудио формат в видеофайлах используется в производственной цепочке КМО?","options":["PCM, WAV, 16 бита, 48 kHz","PCM, WAV, 24 бита, 48 kHz","PCM, WAV, 24 бита, 96 kHz"],"correct":1},
  {"q":"В какую категорию должны быть отправлены ярлыки тайтлов для возврата из архива?","options":["Categories->Arhivarius->","Categories->Arhivarius->3anpoc из архива","Categories->Arhivarius->3anpoc из архива ->«Название канала»"],"correct":2},
  {"q":"Какой видеокодек используется в производственной цепочке КМО?","options":["MPEG 1","MPEG2","MPEG4"],"correct":1},
  {"q":"Какое соотношение кадра используется в производственной цепочке КМО?","options":["16:09","4:3","3:4"],"correct":0},
  {"q":"В случае, если в Dalet не показывает просмотровое видео:","options":["Отсутствует файл просмотрового качества","Не проигрывает видео плеер","Все работает"],"correct":0},
  {"q":"Каким двум главным параметрам должны соответствовать разные видео форматы до отправки в КМО?","options":["контейнер MXF, частота 25 кадров в секунду","чересстрочный тип развертки (interlaced), порядок построения полей - верхнее поле первое (top field first), контейнер MXF","чересстрочный тип развертки (interlaced), порядок построения полей - верхнее поле первое (top field first), частота 25 кадров в секунду"],"correct":2},
  {"q":"В случае, если в Dalet не показывает просмотровое видео. Что нужно предпринять?","options":["Импортировать файл просмотрового качества","Экспортировать файл просмотрового качества","Применить политику создания просмотрового качества"],"correct":2},
  {"q":"В случае если поступил запрос на излечение видео файла из Dalet, что нужно сделать?","options":["Отправить запрос администраторам систем автоматизации","Применить конвертер","Применить политику экспорта извлечения видео файла"],"correct":2},
  {"q":"В случае возврата видео файла с долгосрочного архива сколько дней храниться файл на оперативном хранилище Новостного сайта?","options":["5 дней","14 дней","28 дней"],"correct":1},
  {"q":"Что нужно сделать для проверки видео тайтла?","options":["Открыть свойства тайтла и проверить высокое и низкое качество видео","Открыть на Timeline","Отправить на монтажную станцию"],"correct":0},
  {"q":"В случае возврата видео файла с долгосрочного архива сколько дней храниться файл на оперативном хранилище Производственного сайта?","options":["35 дней","55 дней","30 дней"],"correct":1},
  {"q":"Что такое антивирусная защита?","options":["Процедура (алгоритм) вероятностного или детерминированного характера, позволяющая предотвратить проникновение и активизацию субъекта-вируса из объекта-источника","База данных, в которой хранятся сигнатуры вирусов","Комплекс программно-технических и организационных мер и средств, предназначенных для выявления и предотвращения воздействия вирусов (спама)"],"correct":0},
  {"q":"Для экспорта видео тайтлав MXF какую нужно применить миграционную политику?","options":["Export from Amc","Export mp4","Export mov"],"correct":0},
  {"q":"Для создания просмотрового качества какую нужно применить миграционную политику?","options":["XDCAM HD to LR_mp4","Export mp4","Upload to Omneon"],"correct":0},
  {"q":"Все пользователи обязаны:","options":["Производить настройки (конфигурирование) антивирусных средств защиты","Проверять средствами антивирусной защиты все файлы, полученные из Интернета, посредством электронной почты, а также копируемые на компьютер или ресурс средств антивирусной защиты посредством флэш-карт, внешних жестких дисков, CD/DVD дисков, на наличие вирусов","Самостоятельно устанавливать на компьютеры любые антивирусные средств защиты"],"correct":1},
  {"q":"Автоматическое создание полной резервной копии БД должно быть","options":["Не менее чем раз в сутки","Не менее чем раз двое в сутки","Не менее чем раз в трое суток"],"correct":0},
  {"q":"Резервному копированию подлежит информация следующих основных категорий:","options":["Информация, необходимая для восстановления серверов и систем управления базами данных (далее – СУБД)","Рабочие копии установочных компонентов программного обеспечения рабочих станций и серверов","Все перечисленное"],"correct":2},
  {"q":"Какой битрейт используется в производственной цепочке КМО?","options":["25 Мб/сек","50 Мб/сек","100 Мб/сек"],"correct":1},
  {"q":"Глобальная сеть – это?","options":["Система, связанных между собой локальных сетей","Система, связанных между собой локальных телекоммуникационных сетей","Система, связанных между собой локальных сетей и компьютеров отдельных пользователей"],"correct":2},
  {"q":"Чтобы соединить два компьютера по телефонным линиям связи необходимо?","options":["Модем","Два модема","Телефон, модем и специальное программное обеспечение"],"correct":2},
  {"q":"Какая из приведенных схем соединения компьютеров представляет собой замкнутую цепочку?","options":["Шина","Кольцо","Звезда"],"correct":1},
  {"q":"Какой кабель обеспечивает скоростью передачи данных до 10 Мбит/с?","options":["Коаксиальный","Витая пара","Оптоволокно"],"correct":1},
  {"q":"Самый большой размер сети (до 20 км) имеет топология:","options":["Звезда","Кольцо","Шина"],"correct":1},
  {"q":"Самый маленький размер сети (до 200 м) имеет топология:","options":["Звезда","Кольцо","Шина"],"correct":2},
  {"q":"Топология компьютерной сети, в которой все компьютеры сети присоединены к центральному узлу называется?","options":["Звезда","Кольцо","Шина"],"correct":0},
  {"q":"Протокол – это?","options":["Способность компьютера посылать файлы через каналы передачи информации","Устройство для работы локальной сети","Стандарт передачи данных через компьютерную сеть"],"correct":2},
  {"q":"Самый высокий уровень безопасности?","options":["Звезда","Кольцо","Шина"],"correct":0},
  {"q":"Виды компьютерных сетей?","options":["Личные, локальные, корпоративные, территориальные, глобальные","Персональные, локальные, корпоративные, городские, глобальные","Персональные, спутниковые, 4-G"],"correct":1},
  {"q":"Сколько типов бывают линии связи?","options":["Спутниковые и Глонасс","Беспроводные и глобальные","Беспроводные и проводные"],"correct":2},
  {"q":"Коммутаторы или свитчи используются для:","options":["Для выбора маршрута","Объединения компьютеров в единую сеть","Усиления сигнала"],"correct":1},
  {"q":"Компонент программного комплекса VizRT, отвечающий за генерацию графического контента:","options":["VizObject Store","VizEngine","Viz Media Sequencer"],"correct":1},
  {"q":"Наличие какого компонента обязательно для работоспособности системы графического оформления в комплексе многоканального вещания Товарищества:","options":["VizTrio","Oracle database","VizEngine"],"correct":2},
  {"q":"Какой плагин требуется использовать при построении графической сцены, если требуется использовать покадровую секвенцию изображений?","options":["Clip-In","SoftClip","ImageClip"],"correct":2},
  {"q":"Где по дефолту хранится конфигурационный файл VizEngine в версиях выше 3.7?","options":["C:\\Program Files (x86)","C:\\Program Files","C:\\Programdata"],"correct":2},
  {"q":"Какое из этих имен обозначает разработанный в 1980-х годах метод преобразования имен узлов в адреса IP?","options":["DHCP","DSL","DNS"],"correct":2},
  {"q":"Служба FTP ?","options":["Для создания, приема и передачи Web-страниц","Для приема и передачи файлов любого формата","Для обеспечения работы телеконференций"],"correct":1},
  {"q":"Организацию, обеспечивающую доступ в сеть Internet называют:","options":["Провайдером","Проводником","Поставщиком"],"correct":0},
  {"q":"URL - это?","options":["Уникальный адрес web-страницы","Адрес пользователя в сети","Уникальное имя пользователя в сети"],"correct":0},
  {"q":"Какие требования к хранению резервных копий установлены в Инструкции?","options":["Резервные копии должны храниться на скоростных носителях, обеспечивающих для них максимальную производительность","Резервные копии должны храниться на системах хранения и физических носителях, которые обеспечивают их долгосрочное, неискажённое хранение.","Резервные копии должны храниться на персональных компьютерах системных администраторов"],"correct":1},
  {"q":"Где должны храниться резервные копии и оригинальные файлы согласно инструкции?","options":["Резервные копии и оригинальные файлы не должны храниться на одних и тех же физических носителях и системах хранения данных","Резервные копии и оригинальные файлы могут находиться в пределах одной системы хранения но на разных носителях","Резервные копии и оригинальные файлы должны находиться в прямом доступе для всех сотрудников Товарищества"],"correct":0},
  {"q":"Кто отвечает за создание резервных копий информации в организации?","options":["Руководитель структурного подразделения","Администратор ИС","Работник, ответственный за обслуживание информационных систем (администратор)"],"correct":1},
  {"q":"Кто должен согласовывать методику резервного копирования для каждой информационной системы?","options":["Руководитель структурного подразделения","Непосредственный исполнитель","Технический директор"],"correct":2},
  {"q":"Какие ситуации могут привести к необходимости восстановления информации?","options":["Сбои, отказы аппаратного или программного обеспечения, ошибки пользователей","Чрезвычайные обстоятельства","Все вышеперечисленное"],"correct":2},
  {"q":"Административная консоль это-","options":["Программный интерфейс, позволяющий менять настройки и конфигурацию ИС","Аппаратный интерфейс позволяющий менять настройки и конфигурацию ИС","Все вышеперечисленное"],"correct":0},
  {"q":"Каково назначение резервного копирования?","options":["Создание актуальных копий критически важных данных для оперативного восстановления при технологических сбоях оборудования или ошибках в работе пользователей ИС","Протоколирование изменений в ИС","Все вышеперечисленное"],"correct":0},
  {"q":"Каково значение термина 'Домен' в контексте ИС?","options":["Индекс всех имеющихся в СУБД таблиц","Минимальная структурная единица организации Active Directory","Web-интерфейс мониторинга состояния ПК и серверов в сети"],"correct":1},
  {"q":"База данных это-","options":["Минимальная структурная единица организации Active Directory","Представленная в объективной форме совокупность самостоятельных материалов, систематизированных таким образом, чтобы эти материалы могли быть найдены и обработаны с помощью электронной вычислительной машины (ЭВМ)","Набор неиндексируемых неструктурированных данных различных типов"],"correct":1},
  {"q":"Что из указанного не регламентируется инструкциями по резервному копированию?","options":["информация, необходимая для восстановления серверов и систем управления базами данных, конфигурационные файлы автоматизированных систем","лицензии к лицензионному ПО, рабочие копии установочных компонентов программного обеспечения рабочих станций и серверов, информация необходимая для восстановления административных консолей ИС","Личные данные пользователей"],"correct":2},
  {"q":"Какую информацию подлежит обязательному антивирусному контролю?","options":["Только текстовые файлы","Только исполняемые файлы","Любая информация, передаваемая по ЛВС и со съемных носителей"],"correct":2},
  {"q":"Что относится к средствам антивирусной защиты?","options":["Только операционные системы","Утилиты, программы и программные комплексы","Только аппаратные компоненты"],"correct":1},
  {"q":"Какое ПО допускается к использованию в Товариществе?","options":["Только свободно распространяемые антивирусные утилиты","Только лицензионное антивирусное ПО","Любое антивирусное ПО без ограничений"],"correct":1},
  {"q":"Какие обязанности у пользователей при использовании антивирусных средств?","options":["Проверка всех файлов, полученных из Интернета и с флэш-карт","Отключение антивирусных средств по необходимости","Игнорирование предупреждений антивирусного ПО"],"correct":0},
  {"q":"Что запрещено пользователям в отношении антивирусных средств?","options":["Сканирование файлов с использованием антивирусных программ","Попытки отключения и удаления антивирусных средств","Регулярное обновление антивирусных баз"],"correct":1},
  {"q":"Какая ответственность возложена на пользователей?","options":["Применение средств антивирусной защиты на рабочем месте","Отключать антивирусные программы в случае ошибок","Удаление вирусных угроз вручную"],"correct":0},
  {"q":"Что обязаны делать ответственные администраторы Департамента?","options":["Настраивать все пользовательские ПК","Отключать антивирусные программы в случае ошибок","Ежедневно проверять актуальность антивирусных баз"],"correct":2},
  {"q":"Что должно быть настроено для антивирусных программ на ПК?","options":["Ручное обновление","Только ночное сканирование","Автоматический запуск после запуска ПК"],"correct":2},
  {"q":"Как долго хранятся журналы угроз и событий?","options":["1 год","6 месяцев","3 месяца"],"correct":1},
  {"q":"Как настроен модуль межсетевого экрана?","options":["Инспектирует весь скачиваемый трафик на наличие вирусов","Не используется для трафика","Только проверяет загружаемые изображения"],"correct":0},
  {"q":"Что обязаны делать работники Департамента при обнаружении нового вируса?","options":["Игнорировать его","Принимать меры по устранению инцидента","Установить другой антивирус"],"correct":1},
  {"q":"Что включает в себя антивирусная защита?","options":["Резервное копирование файлов","Только обновление программ","Комплексные меры по предотвращению проникновения вирусов"],"correct":2},
  {"q":"Какие файлы должны быть проверены средствами антивирусной защиты?","options":["Все файлы, полученные из Интернета и внешних носителей","Только файлы с флеш-карт","Файлы определенного формата"],"correct":0},
  {"q":"Какие программы устанавливаются для антивирусной защиты?","options":["Игровые приложения","Только утилиты","Клиентские программы и программы централизованного администрирования"],"correct":2},
  {"q":"Что делать при массовой вирусной активности?","options":["Игнорировать ситуацию","Сообщить руководителю и администратору по информационной безопасности","Перезагрузить серверы"],"correct":1},
  {"q":"Как часто проводится автоматическая проверка локальных дисков на ПК?","options":["Раз в месяц","Ежедневно","Раз в неделю"],"correct":1},
  {"q":"Что использовать для защиты трафика?","options":["Обычные утилиты","Только файервол","Специальный модуль межсетевого экранный"],"correct":2},
  {"q":"Как долго хранится журнал событий модуля межсетевого экрана?","options":["30 дней","14 дней","60 дней"],"correct":0},
  {"q":"Кто отвечает за установку антивирусных программ?","options":["Работники Департамента администрирования и сопровождения","Руководители подразделений","Специалисты по информационной безопасности"],"correct":0},
  {"q":"Что пользователи должны делать при подозрении на активность вируса?","options":["Удалять все файлы","Переустанавливать операционную систему","Немедленно оповещать специалистов Департамента"],"correct":2},
  {"q":"Термин обозначающий - возможность присутствия в помещениях.","options":["доступ","впуск","посещение"],"correct":0},
  {"q":"Доступ – это…","options":["термин обозначающий - возможность присутствия в помещениях","термин обозначающий - возможность отсутствия в помещениях","термин обозначающий - возможность присутствия в зале"],"correct":0},
  {"q":"Настоящие Правила доступа в серверные и кроссовые помещения (CAR) разработаны?","options":["в целях обеспечения порядка доступа и разграничения зон ответственности при выполнении работ в серверных и кроссовых помещениях","в целях обеспечения беспорядка доступа и разграничения зон ответственности при выполнении работ в серверных и кроссовых помещениях","в целях обеспечения порядка впуск и разграничения зон ответственности при выполнении работ в серверных и кроссовых помещениях"],"correct":0},
  {"q":"Аббревиатура обозначающие серверные и кроссовые помещения","options":["CAR","CRA","ACR"],"correct":0},
  {"q":"CAR это –","options":["Аббревиатура обозначающие серверные и кроссовые помещения","Аббревиатура обозначающие холодильные и кроссовые помещения","Аббревиатура обозначающие серверные и технические помещения"],"correct":0},
  {"q":"Лица, которые осуществляют хранение и выдачу ключей, а также сопровождение специалистов","options":["ответственные специалисты","ответственные инженеры","ведущие специалисты"],"correct":0},
  {"q":"Лица, которые выполняют работы по техническому обслуживанию систем жизнеобеспечения здания…","options":["специалисты","инженеры","ведущие инженеры"],"correct":1},
  {"q":"Доступ в серверные и кроссовые помещения сотрудников сторонних организаций осуществляется только при сопровождении:","options":["ответственных специалистов Товарищества","ответственных инженеров Товарищества","ответственных ведущих специалистов Товарищества"],"correct":0},
  {"q":"Кто осуществляет выдачу ключей CAR-7,9?","options":["ведущий инженер Отдела МКВ и коммутации","инженер коммутации Отдела МКВ и коммутации","инженер многоканального вещания"],"correct":0},
  {"q":"Где фиксируется выдача и прием ключей CAR-7,9?","options":["в общем электроном журнале","в регистрационных журналах на рабочих местах структурными подразделениями","все верно"],"correct":2},
  {"q":"Какой отдел ответственный за хранение и выдачу ключей от серверных и кроссовых помещений CAR-7, CAR-9; а также за сопровождение:","options":["Отдел МКВ и коммутации","Отдел эксплуатации АСК","Отдел администрирования и сопровождения технологической части"],"correct":0},
  {"q":"Список лиц сторонних организаций, которым требуется доступ в серверные и кроссовые помещения, должен быть","options":["указан в договоре на оказание услуг","службой контроля режима","все верно"],"correct":2},
  {"q":"Кто проводит инструктаж по Правилам техники безопасности на рабочем месте для работы в CAR-7,9?","options":["ведущий инженер Отдела МКВ и коммутации","инженер коммутации Отдела МКВ и коммутации","инженер многоканального вещания"],"correct":0},
  {"q":"Кем производится очистка оборудования от пыли, продувка сжатым воздухом во время планово-профилактических работ?","options":["персоналом клининга","ответственными специалистами","инженерами структурных подразделений"],"correct":2},
  {"q":"Что не допускается во избежание поражения электрическим током и/или повреждения оборудования?","options":["Проведение влажной уборки","Очистка оборудования от пыли, продувка сжатым воздухом","Проведение сухой чистки"],"correct":0},
  {"q":"Проведение электромонтажных работ на сети электропитания в серверных помещениях выполняются только","options":["после согласования с соответствующими службами Товарищества","в строгом соответствии с Правилами техники безопасности и нормативными актами","все верно"],"correct":2},
  {"q":"Проведение электромонтажных работ на сети электропитания в серверных помещениях выполняются до … кВ с оформлением всех документов","options":["0.4 кВ","0,5 кВ","0,3 кВ"],"correct":0},
  {"q":"Работы на сети электропитания медийного оборудования допускаются при наличии","options":["предварительного письменного согласования с Технической дирекцией","наряда-допуска для проведения работ","Все верно"],"correct":2},
  {"q":"Кто оформляет наряд-допуск на проведение работ на сети электропитания медийного оборудования?","options":["главный энергетик","старший инженер-энергетик","все верно"],"correct":2},
  {"q":"Какую ответственность несут лица, допустившие нарушения требований Правил?","options":["дисциплинарную","административную","уголовную"],"correct":0},
  {"q":"Норматив времени приема технической пробы от внешних источников до начала приема передачи устанавливается в каком времени?","options":["30 минут","40 минут","60 минут"],"correct":0},
  {"q":"При организации трансляции КМО совместно с Обществом телевизионный сигнал должен соответствовать стандарту?","options":["SMPTE 292 (HD SDI), при отсутствии HD кодера - SMPTE 259 (SD SDI)","SMPE 292 (HD SDI), при отсутствии HD кодера - SMPE 259 (SD SDI)","SMPTE 372 (HD SDI), при отсутствии HD кодера - SMPTE 424 (SD SDI)"],"correct":0},
  {"q":"Сколько приемных антенн у КМО?","options":["10","9","11"],"correct":0},
  {"q":"Техническим браком считается ухудшение субъективного качества изображения и/или звука более ? секунд, а также полное отсутствие звука более ? секунд","options":["5/5","4/5","5/4"],"correct":0},
  {"q":"Аварией считается техническая остановка продолжительностью более ? минут","options":["10","8","11"],"correct":0},
  {"q":"Технической остановкой считается отсутствие изображения и звука более ? секунд","options":["5","4","6"],"correct":0},
  {"q":"К оценке технического качества эфира относятся?","options":["Технический брак, техническая остановка, авария","Технический брак, техническая остановка, катастрофа","Технический дефект, техническая остановка, авария"],"correct":0},
  {"q":"Какая точка стояния у геостационарного телекоммуникационного спутника KazSat3?","options":["58,5 в.д.","55,8 в.д.","85,5 в.д."],"correct":0},
  {"q":"Какая точка стояния у геостационарного телекоммуникационного спутника KazSat2?","options":["86,5 в.д.","68,5 в.д.","85,5 в.д."],"correct":0},
  {"q":"Термин обозначающий распределительную кабельную или воздушную линию электропередачи?","options":["фидер","провод","распределитель"],"correct":0},
  {"q":"Устройство для цифрового кодирования телевизионного видеосигнала?","options":["кодер","декодер","кодек"],"correct":0},
  {"q":"Последовательный цифровой интерфейс для передачи цифровой информации?","options":["SDI","SMPTE 372M","3G"],"correct":0},
  {"q":"Техническое средство, обеспечивающее подъем телевизионного сигнала на борт спутника связи?","options":["передающая спутниковая станция","приемная спутниковая станция","передвижная спутниковая станция"],"correct":0},
  {"q":"Технические средства, обеспечивающее прием, преобразование оптического сигнала в электрический?","options":["оптический демодулятор","оптический модулятор","оптический мультиплексор"],"correct":0},
  {"q":"Технические средства, обеспечивающее преобразование электрического сигнала в оптический и его передачу?","options":["оптический модулятор","оптический демодулятор","оптический мультиплексор"],"correct":0},
  {"q":"Скорость передачи сигнала стандарта SMPTE 259M?","options":["270 Мбит/с, 360 Мбит/с, 143 Мбит/с, и 177 Мбит/с","540 Мбит/с","2,970 Гбит/с и 2,970/1,001 Гбит/с"],"correct":0},
  {"q":"Скорость передачи сигнала стандарта SMPTE 344M?","options":["540 Мбит/с","1485 Мбит/с","2970 Мбит/с"],"correct":0},
  {"q":"Скорость передачи сигнала стандарта SMPTE 292M?","options":["1,485 Гбит/с и 1,485/1,001 Гбит/с","2,970 Гбит/с и 2,970/1,001 Гбит/с","270 Мбит/с, 360 Мбит/с, 143 Мбит/с, и 177 Мбит/с"],"correct":0},
  {"q":"Скорость передачи сигнала стандарта SMPTE 372M?","options":["2,970 Гбит/с и 2,970/1,001 Гбит/с","6 Гбит/с","270 Мбит/с, 360 Мбит/с, 143 Мбит/с, и 177 Мбит/с"],"correct":0},
  {"q":"Спектр частот Ku диапазона?","options":["10,7 – 12,75 ГГц","7,5– 12,7 ГГц","4,0 – 8,0 ГГц"],"correct":0}
];

function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

let currentSet = [];
let score = 0;
let qIndex = 0;
let wrongAnswers = [];

const startBtn = document.getElementById('start');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restart');
const quizDiv = document.getElementById('quiz');
const resultDiv = document.getElementById('result');

startBtn.addEventListener('click', ()=>{
  startBtn.disabled = true;
  shuffle(allQuestions);
  currentSet = allQuestions.slice(0,20);
  score = 0;
  qIndex = 0;
  wrongAnswers = [];
  resultDiv.classList.add('hidden');
  restartBtn.classList.add('hidden');
  nextBtn.classList.add('hidden');
  showQuestion();
});

nextBtn.addEventListener('click', ()=>{
  qIndex++;
  nextBtn.classList.add('hidden');
  showQuestion();
});

restartBtn.addEventListener('click', ()=>{
  startBtn.disabled = false;
  restartBtn.classList.add('hidden');
  resultDiv.classList.add('hidden');
  quizDiv.innerHTML='';
});

function showQuestion(){
  quizDiv.innerHTML = '';
  if(qIndex >= currentSet.length){ showResult(); return; }
  const q = currentSet[qIndex];
  const div = document.createElement('div');
  div.className = 'question';
  div.innerHTML = `<strong>Вопрос ${qIndex+1} из ${currentSet.length}:</strong><p>${q.q}</p>`;
  const optsDiv = document.createElement('div');
  optsDiv.className = 'options';
  const opts = q.options.map((t,i)=>({t,i}));
  shuffle(opts);
  opts.forEach(opt=>{
    const btn = document.createElement('button');
    btn.textContent = (['A','B','C'][opt.i]||'') + ') ' + opt.t;
    btn.addEventListener('click', ()=> onSelect(opt.i, btn));
    optsDiv.appendChild(btn);
  });
  div.appendChild(optsDiv);
  quizDiv.appendChild(div);
}

function onSelect(selectedIdx, btn){
  const buttons = btn.parentElement.querySelectorAll('button');
  buttons.forEach(b=>b.disabled=true);
  const q = currentSet[qIndex];
  if(selectedIdx === q.correct){
    btn.classList.add('correct');
    score++;
  } else {
    btn.classList.add('wrong');
    buttons.forEach(b=>{
      if(b.textContent.startsWith(['A','B','C'][q.correct])) b.classList.add('correct');
    });
    wrongAnswers.push({
      question: q.q,
      selected: q.options[selectedIdx],
      correct: q.options[q.correct]
    });
  }
  nextBtn.classList.remove('hidden');
}

function showResult(){
  resultDiv.classList.remove('hidden');
  let html = `<p>Вы набрали ${score} из ${currentSet.length}.</p>`;
  if(wrongAnswers.length > 0){
    html += '<h3>Неправильные ответы:</h3><ol>';
    wrongAnswers.forEach(w=>{
      html += `<li><strong>Вопрос:</strong> ${w.question}<br>
               <strong>Ваш ответ:</strong> ${w.selected}<br>
               <strong>Правильный ответ:</strong> ${w.correct}</li>`;
    });
    html += '</ol>';
  }
  resultDiv.innerHTML = html;
  restartBtn.classList.remove('hidden');
}
</script>
</body>
</html>